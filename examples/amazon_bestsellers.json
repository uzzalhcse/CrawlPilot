{
  "name": "Amazon Best Sellers Scraper - Optimized",
  "description": "Scrapes Amazon best sellers with complete URL hierarchy tracking and structured data extraction",
  "config": {
    "start_urls": [
      "https://www.amazon.com/Best-Sellers-Pet-Supplies-Pet-Bird-Supplies/zgbs/pet-supplies/2975221011"
    ],
    "max_depth": 1,
    "max_pages": 10,
    "rate_limit_delay": 3000,
    "data_extraction_patterns": [
      "*/dp/*"
    ],
    "storage": {
      "type": "database"
    },
    "url_discovery": [
      {
        "id": "discover_main_categories",
        "type": "extract_links",
        "name": "Discover Main Categories",
        "params": {
          "selector": "#zg_browseRoot .zg_browseRoot a, ._p13n-zg-nav-tree-all_style_zg-browse-item__1rdKf a",
          "url_type": "category",
          "filter": {
            "pattern": ".*/Best-Sellers.*",
            "exclude_pattern": ".*ref=.*nav.*",
            "max_links": 30
          }
        }
      },
      {
        "id": "discover_subcategories",
        "type": "extract_links",
        "name": "Discover Subcategories",
        "params": {
          "selector": "#zg_browseRoot ul li a, ._p13n-zg-nav-tree-all_style_zg-browse-item__1rdKf a",
          "url_type": "subcategory",
          "filter": {
            "pattern": ".*/Best-Sellers.*",
            "exclude_pattern": ".*ref=.*nav.*",
            "max_links": 20
          }
        },
        "dependencies": ["discover_main_categories"]
      },
      {
        "id": "discover_products",
        "type": "extract_links",
        "name": "Discover Product Links",
        "params": {
          "selector": ".p13n-desktop-grid .a-link-normal, .zg-grid-general-faceout a.a-link-normal, div[data-asin] a.a-link-normal",
          "url_type": "product",
          "filter": {
            "pattern": ".*/dp/[A-Z0-9]{10}.*",
            "exclude_pattern": ".*(offer-listing|customer-reviews|product-reviews).*",
            "max_links": 100
          }
        }
      },
      {
        "id": "discover_pagination",
        "type": "extract_links",
        "name": "Discover Pagination Links",
        "params": {
          "selector": ".a-pagination .a-last a, .a-pagination li:not(.a-disabled) a",
          "url_type": "pagination",
          "filter": {
            "pattern": ".*pg=[0-9]+.*",
            "max_links": 5
          }
        }
      }
    ],
    "data_extraction": [
      {
        "id": "extract_product_data",
        "type": "extract",
        "name": "Extract Product Data",
        "params": {
          "schema": "amazon_product",
          "wait_for": "span#productTitle",
          "fields": {
          "title": {
            "selector": "span#productTitle",
            "type": "text",
            "transform": "trim"
          },
          "price": {
            "selector": "#corePrice_desktop .a-price .a-offscreen, .a-price .a-offscreen",
            "type": "text",
            "transform": "trim"
          },
          "rating": {
            "selector": "span#acrPopover",
            "type": "attribute",
            "attribute": "title",
            "transform": "trim"
          },
          "review_count": {
            "selector": "span#acrCustomerReviewText",
            "type": "text",
            "transform": "trim"
          },
          "brand": {
            "selector": "a#bylineInfo",
            "type": "text",
            "transform": "trim"
          },
          "asin": {
            "selector": "input#ASIN",
            "type": "attribute",
            "attribute": "value"
          },
          "features": {
            "selector": "div#feature-bullets ul.a-unordered-list li span.a-list-item",
            "type": "list",
            "multiple": true
          },
          "image_url": {
            "selector": "img#landingImage",
            "type": "attribute",
            "attribute": "src"
          },
          "categories": {
            "selector": "div#wayfinding-breadcrumbs_feature_div ul.a-unordered-list li a",
            "type": "list",
            "multiple": true
          }
        }
        }
      }
    ]
  },
  "status": "active"
}
