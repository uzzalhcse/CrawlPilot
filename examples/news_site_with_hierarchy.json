{
  "name": "News Site Crawler with URL Hierarchy",
  "description": "Crawls a news website tracking the hierarchy from homepage → sections → articles",
  "start_urls": [
    "https://news.ycombinator.com"
  ],
  "max_depth": 2,
  "nodes": [
    {
      "id": "navigate_home",
      "type": "navigate",
      "params": {
        "wait_for": ".itemlist",
        "timeout": 10000
      }
    },
    {
      "id": "discover_articles",
      "type": "extract_links",
      "params": {
        "selector": ".titleline > a",
        "url_type": "article",
        "filter": {
          "exclude_pattern": ".*item\\?id=.*",
          "max_links": 30
        }
      },
      "depends_on": ["navigate_home"]
    },
    {
      "id": "discover_pagination",
      "type": "extract_links",
      "params": {
        "selector": ".morelink",
        "url_type": "pagination",
        "filter": {
          "pattern": ".*\\?p=.*"
        }
      },
      "depends_on": ["navigate_home"]
    },
    {
      "id": "navigate_article",
      "type": "navigate",
      "params": {
        "wait_for": "body",
        "timeout": 10000
      },
      "depends_on": ["discover_articles"]
    },
    {
      "id": "extract_article_data",
      "type": "extract_data",
      "params": {
        "schema": "hn_article",
        "fields": {
          "title": {
            "selector": "title",
            "type": "text"
          },
          "url": {
            "selector": "meta[property='og:url']",
            "type": "attribute",
            "attribute": "content"
          },
          "description": {
            "selector": "meta[name='description'], meta[property='og:description']",
            "type": "attribute",
            "attribute": "content"
          },
          "author": {
            "selector": "meta[name='author']",
            "type": "attribute",
            "attribute": "content"
          },
          "published_date": {
            "selector": "meta[property='article:published_time']",
            "type": "attribute",
            "attribute": "content"
          },
          "image": {
            "selector": "meta[property='og:image']",
            "type": "attribute",
            "attribute": "content"
          }
        }
      },
      "depends_on": ["navigate_article"]
    }
  ],
  "settings": {
    "concurrent_requests": 5,
    "request_delay": 500,
    "retry_attempts": 2,
    "user_agent": "Mozilla/5.0 (compatible; CrawlifyBot/1.0)"
  }
}
