{
	"info": {
		"_postman_id": "crawlify-api-collection",
		"name": "Crawlify API",
		"description": "Complete API collection for Crawlify Web Crawler API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "crawlify"
	},
	"item": [
		{
			"name": "Health Check",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "Check if the API and database are healthy"
					},
					"response": []
				}
			]
		},
		{
			"name": "Workflows",
			"item": [
				{
					"name": "Create Workflow - Simple Crawler",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"workflow_id\", jsonData.id);",
									"    pm.test(\"Workflow created successfully\", function () {",
									"        pm.expect(jsonData.id).to.not.be.empty;",
									"        pm.expect(jsonData.status).to.eql(\"draft\");",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Simple Website Crawler\",\n  \"description\": \"Basic crawler for extracting page titles and content\",\n  \"config\": {\n    \"start_urls\": [\n      \"https://example.com\"\n    ],\n    \"max_depth\": 2,\n    \"max_pages\": 50,\n    \"rate_limit_delay\": 1000,\n    \"url_discovery\": [\n      {\n        \"id\": \"extract_links\",\n        \"type\": \"extract_links\",\n        \"name\": \"Extract all links from page\",\n        \"params\": {\n          \"selector\": \"a[href]\"\n        },\n        \"output_key\": \"discovered_links\"\n      }\n    ],\n    \"data_extraction\": [\n      {\n        \"id\": \"extract_title\",\n        \"type\": \"extract\",\n        \"name\": \"Extract page title\",\n        \"params\": {\n          \"selector\": \"h1\",\n          \"type\": \"text\",\n          \"transform\": [\n            {\n              \"type\": \"trim\"\n            }\n          ]\n        },\n        \"output_key\": \"title\"\n      },\n      {\n        \"id\": \"extract_description\",\n        \"type\": \"extract\",\n        \"name\": \"Extract meta description\",\n        \"params\": {\n          \"selector\": \"meta[name='description']\",\n          \"type\": \"attr\",\n          \"attribute\": \"content\",\n          \"default_value\": \"\"\n        },\n        \"output_key\": \"description\"\n      },\n      {\n        \"id\": \"extract_paragraphs\",\n        \"type\": \"extract\",\n        \"name\": \"Extract all paragraphs\",\n        \"params\": {\n          \"selector\": \"p\",\n          \"type\": \"text\",\n          \"multiple\": true,\n          \"transform\": [\n            {\n              \"type\": \"trim\"\n            }\n          ]\n        },\n        \"output_key\": \"paragraphs\",\n        \"optional\": true\n      }\n    ],\n    \"storage\": {\n      \"type\": \"database\",\n      \"table_name\": \"crawled_pages\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows"
							]
						},
						"description": "Create a new simple crawler workflow"
					},
					"response": []
				},
				{
					"name": "Create Workflow - E-commerce Scraper",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"E-commerce Product Scraper\",\n  \"description\": \"Scrape product details with interactions\",\n  \"config\": {\n    \"start_urls\": [\n      \"https://example-shop.com/products\"\n    ],\n    \"max_depth\": 2,\n    \"max_pages\": 100,\n    \"rate_limit_delay\": 2000,\n    \"url_discovery\": [\n      {\n        \"id\": \"wait_for_products\",\n        \"type\": \"wait_for\",\n        \"name\": \"Wait for product grid\",\n        \"params\": {\n          \"selector\": \".product-grid\",\n          \"timeout\": 10000,\n          \"state\": \"visible\"\n        }\n      },\n      {\n        \"id\": \"scroll_page\",\n        \"type\": \"scroll\",\n        \"name\": \"Scroll to load content\",\n        \"params\": {\n          \"x\": 0,\n          \"y\": 1000\n        },\n        \"dependencies\": [\"wait_for_products\"]\n      },\n      {\n        \"id\": \"extract_product_links\",\n        \"type\": \"extract_links\",\n        \"name\": \"Extract product links\",\n        \"params\": {\n          \"selector\": \".product-card a\"\n        },\n        \"dependencies\": [\"scroll_page\"]\n      }\n    ],\n    \"data_extraction\": [\n      {\n        \"id\": \"extract_product\",\n        \"type\": \"extract\",\n        \"name\": \"Extract product data\",\n        \"params\": {\n          \"selector\": \".product-details\",\n          \"type\": \"text\",\n          \"fields\": {\n            \"title\": {\n              \"selector\": \"h1.product-title\",\n              \"type\": \"text\",\n              \"transform\": [{\"type\": \"trim\"}]\n            },\n            \"price\": {\n              \"selector\": \".price-current\",\n              \"type\": \"text\",\n              \"transform\": [\n                {\"type\": \"trim\"},\n                {\"type\": \"regex\", \"params\": {\"pattern\": \"[^0-9.]\", \"replacement\": \"\"}},\n                {\"type\": \"parse_float\"}\n              ]\n            },\n            \"image\": {\n              \"selector\": \"img.product-image\",\n              \"type\": \"src\"\n            }\n          }\n        },\n        \"output_key\": \"product\"\n      }\n    ],\n    \"storage\": {\n      \"type\": \"database\",\n      \"table_name\": \"products\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows"
							]
						},
						"description": "Create an e-commerce product scraper workflow"
					},
					"response": []
				},
				{
					"name": "List All Workflows",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows"
							]
						},
						"description": "Get all workflows"
					},
					"response": []
				},
				{
					"name": "List Active Workflows",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows?status=active&limit=10&offset=0",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows"
							],
							"query": [
								{
									"key": "status",
									"value": "active"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						},
						"description": "Get workflows filtered by status"
					},
					"response": []
				},
				{
					"name": "Get Workflow by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}"
							]
						},
						"description": "Get a specific workflow by ID"
					},
					"response": []
				},
				{
					"name": "Update Workflow",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Simple Crawler\",\n  \"description\": \"Updated crawler with more features\",\n  \"status\": \"draft\",\n  \"config\": {\n    \"start_urls\": [\n      \"https://example.com\",\n      \"https://example.com/about\"\n    ],\n    \"max_depth\": 3,\n    \"max_pages\": 100,\n    \"rate_limit_delay\": 1500,\n    \"url_discovery\": [\n      {\n        \"id\": \"extract_links\",\n        \"type\": \"extract_links\",\n        \"name\": \"Extract all links\",\n        \"params\": {\n          \"selector\": \"a[href]\"\n        }\n      }\n    ],\n    \"data_extraction\": [\n      {\n        \"id\": \"extract_title\",\n        \"type\": \"extract\",\n        \"name\": \"Extract title\",\n        \"params\": {\n          \"selector\": \"h1\",\n          \"type\": \"text\",\n          \"transform\": [{\"type\": \"trim\"}]\n        },\n        \"output_key\": \"title\"\n      }\n    ],\n    \"storage\": {\n      \"type\": \"database\",\n      \"table_name\": \"crawled_pages\"\n    }\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}"
							]
						},
						"description": "Update an existing workflow"
					},
					"response": []
				},
				{
					"name": "Update Workflow Status to Active",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status updated to active\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.status).to.eql(\"active\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}",
								"status"
							]
						},
						"description": "Activate a workflow to make it executable"
					},
					"response": []
				},
				{
					"name": "Update Workflow Status to Paused",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"paused\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}",
								"status"
							]
						},
						"description": "Pause a workflow"
					},
					"response": []
				},
				{
					"name": "Delete Workflow",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}"
							]
						},
						"description": "Delete a workflow permanently"
					},
					"response": []
				}
			]
		},
		{
			"name": "Executions",
			"item": [
				{
					"name": "Start Workflow Execution",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"execution_id\", jsonData.execution_id);",
									"    pm.test(\"Execution started\", function () {",
									"        pm.expect(jsonData.execution_id).to.not.be.empty;",
									"    });",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}/execute",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}",
								"execute"
							]
						},
						"description": "Start executing a workflow (workflow must be in 'active' status)"
					},
					"response": []
				},
				{
					"name": "Get Execution Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/executions/{{execution_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"executions",
								"{{execution_id}}"
							]
						},
						"description": "Get the current status of a workflow execution"
					},
					"response": []
				},
				{
					"name": "Get Execution Queue Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/executions/{{execution_id}}/stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"executions",
								"{{execution_id}}",
								"stats"
							]
						},
						"description": "Get detailed queue statistics for an execution"
					},
					"response": []
				},
				{
					"name": "Stop Execution",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/executions/{{execution_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"executions",
								"{{execution_id}}"
							]
						},
						"description": "Stop a running workflow execution"
					},
					"response": []
				}
			]
		},
		{
			"name": "Complete Workflow Flow",
			"item": [
				{
					"name": "1. Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "2. Create Workflow",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"workflow_id\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Test Workflow\",\n  \"description\": \"Complete workflow test\",\n  \"config\": {\n    \"start_urls\": [\"https://example.com\"],\n    \"max_depth\": 1,\n    \"max_pages\": 10,\n    \"rate_limit_delay\": 1000,\n    \"url_discovery\": [\n      {\n        \"id\": \"extract_links\",\n        \"type\": \"extract_links\",\n        \"params\": {\"selector\": \"a[href]\"}\n      }\n    ],\n    \"data_extraction\": [\n      {\n        \"id\": \"extract_title\",\n        \"type\": \"extract\",\n        \"params\": {\n          \"selector\": \"h1\",\n          \"type\": \"text\",\n          \"transform\": [{\"type\": \"trim\"}]\n        },\n        \"output_key\": \"title\"\n      }\n    ],\n    \"storage\": {\"type\": \"database\", \"table_name\": \"test_data\"}\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows"
							]
						}
					},
					"response": []
				},
				{
					"name": "3. Activate Workflow",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}",
								"status"
							]
						}
					},
					"response": []
				},
				{
					"name": "4. Start Execution",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 202) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"execution_id\", jsonData.execution_id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/workflows/{{workflow_id}}/execute",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"workflows",
								"{{workflow_id}}",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "5. Check Execution Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/executions/{{execution_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"executions",
								"{{execution_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "6. Get Queue Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/executions/{{execution_id}}/stats",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"executions",
								"{{execution_id}}",
								"stats"
							]
						}
					},
					"response": []
				}
			],
			"description": "Complete workflow from creation to execution - run these in sequence"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}
